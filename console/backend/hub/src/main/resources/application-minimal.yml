# 最小化本地调试配置
# 用途: 只启动 WorkflowChatController 调试所需的最少组件

server:
  port: 8080

spring:
  # 禁用不需要的自动配置
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      - org.redisson.spring.starter.RedissonAutoConfiguration
      - org.redisson.spring.starter.RedissonAutoConfigurationV2
  
  datasource:
    url: jdbc:mysql://localhost:3306/astron_console?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 5
      minimum-idle: 1
  
  security:
    enabled: false  # 禁用 Spring Security
  
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB

# S3 配置 (使用 Docker 中的 MinIO)
s3:
  endpoint: http://localhost:18999
  remoteEndpoint: http://localhost:18999
  accessKey: minioadmin
  secretKey: minioadmin
  bucket: astron-agent
  presignExpirySeconds: 600
  enablePublicRead: false  # 禁用 public read 避免权限问题

# Workflow 服务 URL (Java 版本)
workflow:
  chatUrl: http://localhost:7881/api/v1/workflow/chat/stream
  debugUrl: http://localhost:7881/api/v1/workflow/chat/stream
  resumeUrl: http://localhost:7881/api/v1/workflow/chat/resume
  enabled: true
  timeout-ms: 300000

# MAAS 配置 (最小配置)
maas:
  appId: local-test
  apiKey: local-test
  apiSecret: local-test
  workflowVersion: http://127.0.0.1:8080/workflow/version
  workflowConfig: http://127.0.0.1:8080/workflow/get-flow-advanced-config

# 日志级别
logging:
  level:
    root: INFO
    com.iflytek: DEBUG
    org.springframework.security: OFF
    org.springframework.boot.autoconfigure: ERROR
    io.minio: ERROR  # 禁用 MinIO 详细日志
