# 本地调试配置
# 激活方式: 在 IDEA Run Configuration 的 Active profiles 填写: local

server:
  port: 8080

spring:
  datasource:
    # 使用本地的 MySQL (端口 3307)
    url: jdbc:mysql://localhost:3306/astron_console?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 2
      connection-timeout: 30000
  
  data:
    redis:
      # 使用本地的 Redis (端口 6380)
      host: localhost
      port: 6380
      database: 1
      password: ~  # 无密码
      timeout: 3000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: -1ms
  
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://localhost:7001  # Casdoor
          jwk-set-uri: http://localhost:7001/.well-known/jwks
          audiences:
            - astron-console
  
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB
  
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration

# S3(MinIO) 配置 - 使用本地 MinIO
s3:
  endpoint: http://localhost:9000
  remoteEndpoint: http://localhost:9000
  accessKey: minioadmin
  secretKey: minioadmin
  bucket: uploads  # 使用你本地的 bucket 名称
  presignExpirySeconds: 600
  enablePublicRead: false

# Workflow 服务 URL (Java 版本)
workflow:
  chatUrl: http://localhost:7881/api/v1/workflow/chat/stream
  debugUrl: http://localhost:7881/api/v1/workflow/chat/stream
  resumeUrl: http://localhost:7881/api/v1/workflow/chat/resume
  enabled: true
  timeout-ms: 300000
  max-concurrent-workflows: 100
  event-cache-expire-seconds: 1800
  debug-enabled: true

# MAAS 配置
maas:
  appId: test-app-id
  apiKey: test-api-key
  apiSecret: test-api-secret
  workflowVersion: http://127.0.0.1:8080/workflow/version
  synchronizeWorkFlow: http://127.0.0.1:8080/workflow
  publish: http://127.0.0.1:8080/workflow/publish
  cloneWorkFlow: http://127.0.0.1:8080/workflow/internal-clone
  getInputs: http://127.0.0.1:8080/workflow/get-inputs-info
  canPublishUrl: http://127.0.0.1:8080/workflow/can-publish
  consumerId: test-consumer-id
  consumerSecret: test-consumer-secret
  consumerKey: test-consumer-key
  publishApi: http://localhost:7880/workflow/v1/publish
  authApi: http://localhost:7880/workflow/v1/auth
  mcpHost: https://xingchen-api.xf-yun.com/mcp/xingchen/flow/%s/sse
  mcpRegister: http://127.0.0.1:8080/workflow/release
  workflowConfig: http://127.0.0.1:8080/workflow/get-flow-advanced-config

# Spark LLM 配置 (本地调试可以用假值)
spark:
  app-id: test-app-id
  api-key: test-api-key
  api-secret: test-api-secret
  api:
    password: test-password
  rtasr-key: test-rtasr-key
  rtasr-appId: test-rtasr-appid
  image-appId: test-image-appid
  image-apiKey: test-image-api-key
  image-apiSecret: test-image-api-secret

# 日志级别
logging:
  level:
    root: INFO
    com.iflytek: DEBUG
    org.springframework: INFO
    com.zaxxer.hikari: DEBUG
    org.redisson: DEBUG